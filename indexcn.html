<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zhang Junyao's personal site</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f0f0f0;
            position: relative;
        }
        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }
        .site-index {
            text-align: center;
            padding: 10px;
            font-size: 15px;
            z-index: 2;
        }
        footer {
            text-align: center;
            padding: 20px;
            z-index: 2;
        }
        header {
            z-index: 2;
        }
        main {
            position: relative;
            z-index: 2;
            text-align: center;
            padding-top: 50px;
        }
        h1 {
            font-size: 36px;
            color: yellowgreen;  /* ä¿®æ”¹æ ‡é¢˜é¢œè‰² */
        }
        p {
            font-size: 14px;
            color: rgb(83, 57, 177);
        }

        /* æ“ä½œå¼•å¯¼å’Œåˆ†æ•°æ ·å¼ */
        .game-info {
            position: absolute;
            bottom: 60px;
            right: 30px;
            color: purple;
            font-size: 10px;
            font-family: 'Futura PT', sans-serif;  /* ä¿®æ”¹å­—ä½“ */
            line-height: 0.8;  /* è°ƒæ•´è¡Œè· */
            z-index: 2;
            text-align: right;
        }
    </style>
</head>
<body>

    <div class="site-index">
        <a href="index.html"> Â· å¼  ä¿Š ç‘¶ Â· </a>
        <a href="index.html" class="language-link"> EN </a> <!-- è‹±æ–‡é“¾æ¥ -->
        <span class="separator">/</span> <!-- åˆ†éš”ç¬¦ -->
        <a href="indexcn.html" class="language-link"> ä¸­æ–‡ </a> <!-- ä¸­æ–‡é“¾æ¥ -->
    </div>

    <header>
        <nav>
            <ul>
                <li><a href="game.html">æ¸¸æˆç›¸å…³</a></li>
                <li><span>|</span></li>
                <li><a href="video.html">å½± åƒ</a></li>
                <li><span>|</span></li>
                <li><a href="photo.html">æ‘„ å½±</a></li>
                <li><span>|</span></li>
                <li><a href="album.html">ä¸“ è¾‘</a></li>
                <li><span>|</span></li>
                <li><a href="blog.html">åš å®¢</a></li>
                <li><span>|</span></li>
                <li><a href="about.html">ç®€ ä»‹</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Z H A N G J u n Y a o</h1>
        <p>Harukaçš„é€†ç†µç ”ç©¶æ‰€</p>
    </main>

    <footer>
        <p> ãƒ¾(â€¢Ï‰â€¢`)oğŸ‘»ğŸ‘»ğŸ‘»ğŸ‘»&copy; 2024 - Junyao ZHANG</p>
    </footer>

    <!-- æ¸¸æˆç”»å¸ƒ -->
    <canvas id="snakeCanvas"></canvas>

    <!-- æ¸¸æˆä¿¡æ¯ï¼ˆæ“ä½œå¼•å¯¼ã€åˆ†æ•°ï¼‰ -->
    <div class="game-info">
        <p>æœ€é«˜åˆ†æ•°: <span id="bestScore">0</span></p>
        <p>åˆ†æ•°: <span id="score">0</span></p>
        <p>ä½¿ç”¨ æ–¹å‘é”®/WASD æ¥æ§åˆ¶è´ªåƒè›‡</p>
    </div>

    <script>
        // è·å–ç”»å¸ƒ
        const snakeCanvas = document.getElementById('snakeCanvas');
        const snakeCtx = snakeCanvas.getContext('2d');

        // è®¾ç½®ç”»å¸ƒä¸ºæ•´ä¸ªé¡µé¢å¤§å°
        snakeCanvas.width = window.innerWidth;
        snakeCanvas.height = window.innerHeight;

        // è›‡çš„è®¾ç½®
        const snakeSize = 15;  // è›‡å’Œé£Ÿç‰©çš„å¤§å°ç¼©å°
        let snake = [{ x: 5, y: 5 }];
        let food = { x: 10, y: 10 };
        let direction = 'RIGHT';
        let gameInterval;
        let score = 0;
        let bestScore = localStorage.getItem('bestScore') || 0;
        let isPaused = false;  // ç”¨äºæ§åˆ¶æ¸¸æˆæš‚åœ/ç»§ç»­

        // ç»˜åˆ¶è›‡
        function drawSnake() {
            snakeCtx.clearRect(0, 0, snakeCanvas.width, snakeCanvas.height);
            for (let i = 0; i < snake.length; i++) {
                snakeCtx.fillStyle = (i === 0) ? 'purple' : 'yellowgreen';
                snakeCtx.fillRect(snake[i].x * snakeSize, snake[i].y * snakeSize, snakeSize, snakeSize);
            }
        }

        // ç»˜åˆ¶é£Ÿç‰©
        function drawFood() {
            snakeCtx.fillStyle = 'red';
            snakeCtx.fillRect(food.x * snakeSize, food.y * snakeSize, snakeSize, snakeSize);
        }

        // ç§»åŠ¨è›‡
        function moveSnake() {
            if (isPaused) return;  // å¦‚æœæ¸¸æˆæš‚åœï¼Œä¸è¿›è¡Œç§»åŠ¨

            const head = { ...snake[0] };

            if (direction === 'UP') head.y -= 1;
            if (direction === 'DOWN') head.y += 1;
            if (direction === 'LEFT') head.x -= 1;
            if (direction === 'RIGHT') head.x += 1;

            snake.unshift(head);

            // æ£€æŸ¥è›‡æ˜¯å¦åƒåˆ°é£Ÿç‰©
            if (head.x === food.x && head.y === food.y) {
                generateFood();
                score++;
                if (score > bestScore) {
                    bestScore = score;
                    localStorage.setItem('bestScore', bestScore);  // ä¿å­˜æœ€å¥½æˆç»©
                }
            } else {
                snake.pop();
            }

            // æ£€æŸ¥è›‡æ˜¯å¦æ’å¢™æˆ–è‡ªå·±
            if (head.x < 0 || head.x * snakeSize >= snakeCanvas.width || head.y < 0 || head.y * snakeSize >= snakeCanvas.height || isCollisionWithSelf()) {
                clearInterval(gameInterval);
                alert('æ¬¢è¿æ¥æˆ‘çš„ä¸»é¡µ!ãƒ¾(â€¢Ï‰â€¢`)o');
            }

            drawSnake();
            drawFood();

            // æ›´æ–°åˆ†æ•°å’Œæœ€ä½³åˆ†æ•°
            document.getElementById('score').textContent = score;
            document.getElementById('bestScore').textContent = bestScore;
        }

        // æ£€æŸ¥æ˜¯å¦æ’åˆ°è‡ªå·±
        function isCollisionWithSelf() {
            const head = snake[0];
            for (let i = 1; i < snake.length; i++) {
                if (snake[i].x === head.x && snake[i].y === head.y) return true;
            }
            return false;
        }

        // éšæœºç”Ÿæˆé£Ÿç‰©
        function generateFood() {
            food.x = Math.floor(Math.random() * (snakeCanvas.width / snakeSize));
            food.y = Math.floor(Math.random() * (snakeCanvas.height / snakeSize));
        }

        // ç›‘å¬é”®ç›˜äº‹ä»¶
        document.addEventListener('keydown', (event) => {
    if (event.key === 'ArrowUp' || event.key === 'w') {
        if (direction !== 'DOWN') direction = 'UP';  // é˜²æ­¢å‘ä¸‹åç«‹å³å‘ä¸Š
    }
    if (event.key === 'ArrowDown' || event.key === 's') {
        if (direction !== 'UP') direction = 'DOWN';  // é˜²æ­¢å‘ä¸Šåç«‹å³å‘ä¸‹
    }
    if (event.key === 'ArrowLeft' || event.key === 'a') {
        if (direction !== 'RIGHT') direction = 'LEFT';  // é˜²æ­¢å‘å³åç«‹å³å‘å·¦
    }
    if (event.key === 'ArrowRight' || event.key === 'd') {
        if (direction !== 'LEFT') direction = 'RIGHT';  // é˜²æ­¢å‘å·¦åç«‹å³å‘å³
    }

    // æŒ‰ç©ºæ ¼é”®æš‚åœæˆ–ç»§ç»­æ¸¸æˆ
    if (event.key === ' ') {
        isPaused = !isPaused;
        if (!isPaused) {
            startGame();  // é‡æ–°å¼€å§‹æ¸¸æˆ
        }
    }
});


        // å¯åŠ¨æ¸¸æˆ
        function startGame() {
            // å‡æ…¢æ¸¸æˆé€Ÿåº¦ï¼šå¢åŠ æ—¶é—´é—´éš”
            if (!gameInterval) {
                gameInterval = setInterval(moveSnake, 100);  // æ¯ 150ms æ›´æ–°ä¸€æ¬¡ï¼Œç•¥å¾®åŠ å¿«è›‡çš„é€Ÿåº¦
            }
        }

        startGame();
    </script>
</body>
</html>
